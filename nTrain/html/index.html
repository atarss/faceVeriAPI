<html>
  <head>
  	<title>N-Train Demo</title>
  	<script src="script/main.js"></script>
  	<script src="script/jquery-1.11.0.min.js"></script>
    <script src="script/jquery.form.js"></script>
    <script src="script/jqxcore.js"></script>
    <script src="script/jqxbuttons.js"></script>
    <script src="script/jqxscrollbar.js"></script>
    <script src="script/jqxlistbox.js"></script>
    <script src="script/jqxpanel.js"></script>
    <link rel="stylesheet" href="style/bootstrap.min.css">
    <link rel="stylesheet" href="style/bootstrap-theme.min.css">
    <link rel="stylesheet" href="style/jqx.base.css">
    <link rel="stylesheet" href="style/jqx.darkblue.css">
    <link rel="stylesheet" href="style/style.css">
  </head>
  <body>
    <div class="header">
      <h1>N-Train Demo</h1>
    </div>
    <div class="out_frame">
      <div class="left_frame">
        <div class="upload_frame">
          <div class="panel panel-info">
            <div class="panel-heading">
              <div class="panel-title">Upload Here:</div>
            </div>
            <div class="panel-body">
              <br />
              <form action="http://10.193.251.172:8082/ntrain_api" enctype="multipart/form-data" id="upload_form" method="post">
                <div class="btn btn-lg btn-info" id="bt">Loading...</div>
                <input type="file" name="imgfile" accept="image/jpeg" style="display:none" id="img_file">
                <input type="hidden" name="version" value="1.0">
                <input type="hidden" name="method" value="upload_image">
                <input type="hidden" name="session_id" value="-1" id="form_session_id">
              </form>
              <h5 style="text-align:center">You can upload 8 to 20 pictures here</h5>
            </div>
          </div>
        </div>
        <div class="list_frame">
          <div class="panel panel-info">
            <div class="panel-heading">
              <div class="panel-title">
                File List
              </div>
            </div>
            <div id="jqx_listbox" style="height : 455px"></div>
          </div>
        </div>
      </div>
      <div class="result_frame">
        <div class="panel panel-info" style="height : 700px;">
          <div class="panel-heading">
            <div class="panel-title">
              Result
            </div>
          </div>
          <div class="panel-body">
            <div class="pic_paper_container" id="paper_container"></div>
            <div class="img_box">
              <img id="file_img" src="">
            </div>
            <div class="result_button_box" id="result_console">
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="submit_face_box">
      <div class="btn btn-lg btn-info" id="submit_face_button">Submit Faces</div>
    </div>
    <div class="compare_face_box">
      <div class="compare_frame">
        <div class="panel panel-info" style="height : 700px;">
          <div class="panel-heading">
            <div class="panel-title">
              Compare
            </div>
          </div>
          <div class="panel-body">
            <div class="pic_paper_container" id="paper_container"></div>
            <div class="img_box">
              <img id="file_img" src="">
            </div>
            <div class="compare_button_box" id="compare_console">
              <div class="btn btn-lg btn-info" id="compare_upload">Choose File</div>
              <div class="btn btn-lg btn-info" id="compare_start">Compare</div>
            </div>

          </div>
        </div>
      </div>
    </div>
    <div id="jqx_console"></div>
    <script type="text/javascript">
      var wrapper = $('<div/>').css({height:0,width:0,'overflow':'hidden'});
      var fileInput = $('#img_file').wrap(wrapper);
    	$("#upload_form").ajaxForm({type: 'POST'});
      $("#bt").click(function(){
        fileInput.click();
      });
      fileInput.change(function(){
        $this = $(this);
        $('#file').text($this.val());
        submitFile();
      });

      $("#jqx_listbox").jqxListBox({
        source: [],
        width: '326px', 
        height: '455px'
      });
      $("#jqx_listbox").jqxListBox({itemHeight: 40});
      $("#jqx_listbox").on('select', listBoxSelectFunction);

      $("#submit_face_button").click(submitFaces);
      // init
      $("#jqx_console").jqxPanel({ width: 980, height: 150});
      jqxConsole("Console : ");
      jqxConsole(Date());

      $.post(apiAddress, {
        // version : "1.0" ,
        method : "create_session"
      }, function(postResult) {
        jqxConsole(JSON.stringify(postResult));
        if (postResult.sessionId != undefined){
          $("#bt").text("Upload File");
          sessionId = postResult.sessionId;
          $("#form_session_id").attr('value',sessionId)
          hasSessionId = true;
        } else {
          jqxConsole("no session id! Unable to run program.")
        }
      }, 'json');

    </script>
  </body>
</html>